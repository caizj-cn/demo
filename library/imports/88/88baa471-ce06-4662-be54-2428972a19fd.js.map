{"version":3,"sources":["assets\\Script\\game\\factory\\factoryShoot.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACA,6DAAwD;AACxD,mEAA8D;AAC9D,+CAA0C;AAC1C,8CAAyC;AAEnC,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAA0C,gCAAY;IADtD;QAAA,qEAuDC;QAnDG,cAAQ,GAAY,IAAI,CAAC;QAGzB,YAAM,GAAU,CAAC,CAAC;QAElB,WAAK,GAAU,CAAC,CAAC;QACjB,cAAQ,GAAU,CAAC,CAAC,CAAA,WAAW;;IA6CnC,CAAC;IAzCG,6BAAM,GAAN;QAEI,IAAI,CAAC,KAAK,GAAI,mBAAS,CAAC,SAAS,CAAC,CAAC,EAAE,EAAC,EAAE,CAAC,CAAC;QAC1C,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;IACjC,CAAC;IAED,4BAAK,GAAL;QAEI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,EAAC,GAAG,CAAC,CAAC;IACxC,CAAC;IAED,kCAAW,GAAX;QAEI,IAAG,qBAAW,CAAC,QAAQ,CAAC,MAAM;YAAC,OAAO;QACtC,IAAG,IAAI,CAAC,KAAK,IAAI,CAAC,EAAE,EACpB;YACI,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;SACrB;aACI,IAAG,IAAI,CAAC,KAAK,IAAI,EAAE,EACxB;YACI,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;SACrB;QACD,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAE,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC;QACvD,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QAE7B,IAAI,CAAC,IAAI,CAAC,SAAS;YAAE,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACzC,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,GAAG,SAAS,CAAC,CAAA,OAAO;QAChD,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI;QACnF,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAA,OAAO;QAC5C,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,QAAQ,CAAC,CAAC,GAAG;QACvC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;QAC9B,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;QAEvC,sBAAY,CAAC,cAAc,CAAC,mBAAS,CAAC,aAAa,EAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IACxE,CAAC;IAED,6BAAM,GAAN,UAAQ,EAAE;IAIV,CAAC;IAlDD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;kDACO;IAGzB;QADC,QAAQ;gDACS;IAND,YAAY;QADhC,OAAO;OACa,YAAY,CAsDhC;IAAD,mBAAC;CAtDD,AAsDC,CAtDyC,EAAE,CAAC,SAAS,GAsDrD;kBAtDoB,YAAY","file":"","sourceRoot":"/","sourcesContent":["import { BulletType } from \"../data/GameConst\";\r\nimport MathUtils from \"../../framewrok/utils/MathUtils\";\r\nimport MsgCallUtils from \"../../framewrok/utils/MsgCallUtils\";\r\nimport GameEvent from \"../data/GameEvent\";\r\nimport GameManager from \"../gameManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class FactoryShoot extends cc.Component \r\n{\r\n    @property(cc.Node)\r\n    shootPos: cc.Node = null;\r\n\r\n    @property\r\n    scaleX:number = 1;\r\n\r\n    angle:number = 0;\r\n    angleDir:number = 0;//0:向下，1：向上\r\n\r\n    private shootData:Object;\r\n\r\n    onLoad () \r\n    {\r\n        this.angle =  MathUtils.randomInt(-30,30);\r\n        this.node.angle = this.angle;    \r\n    }\r\n\r\n    start () \r\n    {\r\n        this.schedule(this.updateAngle,0.5);\r\n    }\r\n\r\n    updateAngle()\r\n    {\r\n        if(GameManager.instance.isOver)return;\r\n        if(this.angle <= -30)\r\n        {\r\n            this.angleDir = 1;\r\n        }\r\n        else if(this.angle >= 30)\r\n        {\r\n            this.angleDir = 0;\r\n        }\r\n        this.angleDir > 0  ? this.angle += 5 : this.angle -= 5;\r\n        this.node.angle = this.angle;\r\n\r\n        if (!this.shootData) this.shootData = {};\r\n        this.shootData[\"prefabName\"] = \"bullet1\";//预制体名称\r\n        this.shootData[\"v\"] = this.node.convertToWorldSpaceAR(this.shootPos.position); //位置\r\n        this.shootData[\"angle\"] = this.angle;//角度cc.\r\n        this.shootData[\"group\"] = \"mybull\"; //组\r\n        this.shootData[\"attack\"] = 20;\r\n        this.shootData[\"scaleX\"] = this.scaleX;\r\n\r\n        MsgCallUtils.notifyObserver(GameEvent.FACTORY_SHOOT,this.shootData);\r\n    }\r\n\r\n    update (dt) \r\n    {\r\n        \r\n\r\n    }\r\n}\r\n"]}