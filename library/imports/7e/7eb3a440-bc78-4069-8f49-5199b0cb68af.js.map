{"version":3,"sources":["assets\\Script\\game\\map\\mapTouch.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mEAA8D;AAC9D,+CAA0C;AAC1C,8CAAyC;AAEnC,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAAsC,4BAAY;IADlD;QAAA,qEAiDC;QA7CG,eAAS,GAAW,IAAI,CAAC;QAEjB,cAAQ,GAAW,IAAI,CAAC;;IA2CpC,CAAC;IAzCG,yBAAM,GAAN;QAEI,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;QAExB,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAC,IAAI,CAAC,UAAU,EAAC,IAAI,CAAC,CAAC;QACjE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,EAAC,IAAI,CAAC,SAAS,EAAC,IAAI,CAAC,CAAC;QAC/D,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAC,IAAI,CAAC,QAAQ,EAAC,IAAI,CAAC,CAAC;IACjE,CAAC;IAED,4BAAS,GAAT;QAEI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QACpE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QACjE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAC,IAAI,CAAC,QAAQ,EAAC,IAAI,CAAC,CAAC;IAClE,CAAC;IAED,6BAAU,GAAV,UAAW,KAAK;QAEZ,IAAI,GAAG,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;QAC9B,IAAI,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,CAAC;QAClD,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;QAC/C,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;QAE/C,qBAAW,CAAC,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC;QACtC,sBAAY,CAAC,cAAc,CAAC,mBAAS,CAAC,SAAS,EAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACnE,CAAC;IACD,4BAAS,GAAT,UAAU,KAAK;QAEX,IAAI,GAAG,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;QAC9B,IAAI,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,CAAC;QAClD,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;QAC/C,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;QAE/C,qBAAW,CAAC,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC;QACtC,sBAAY,CAAC,cAAc,CAAC,mBAAS,CAAC,SAAS,EAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACnE,CAAC;IACD,2BAAQ,GAAR,UAAS,KAAK;QAEV,qBAAW,CAAC,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;IAC3C,CAAC;IA3CD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;+CACO;IAHR,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAgD5B;IAAD,eAAC;CAhDD,AAgDC,CAhDqC,EAAE,CAAC,SAAS,GAgDjD;kBAhDoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["import MsgCallUtils from \"../../framewrok/utils/MsgCallUtils\";\r\nimport GameEvent from \"../data/GameEvent\";\r\nimport GameManager from \"../gameManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class mapTouch extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    curCamera:cc.Node = null;\r\n\r\n    private touchPos:cc.Vec2 = null;\r\n\r\n    onLoad()\r\n    {\r\n        this.touchPos = cc.v2();\r\n\r\n        this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this);\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this);\r\n        this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this);\r\n    }\r\n\r\n    onDestroy() \r\n    {\r\n        this.node.off(cc.Node.EventType.TOUCH_START, this.touchStart, this);\r\n        this.node.off(cc.Node.EventType.TOUCH_END, this.touchMove, this);\r\n        this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this);\r\n    }\r\n\r\n    touchStart(event)\r\n    {\r\n        let pos = event.getLocation();\r\n        let realPos = this.node.convertToNodeSpaceAR(pos);\r\n        this.touchPos.x = realPos.x + this.curCamera.x;\r\n        this.touchPos.y = realPos.y + this.curCamera.y;\r\n\r\n        GameManager.instance.touchDown = true;\r\n        MsgCallUtils.notifyObserver(GameEvent.TOUCH_MAP,this.touchPos);\r\n    }\r\n    touchMove(event)\r\n    {\r\n        let pos = event.getLocation();\r\n        let realPos = this.node.convertToNodeSpaceAR(pos);\r\n        this.touchPos.x = realPos.x + this.curCamera.x;\r\n        this.touchPos.y = realPos.y + this.curCamera.y;\r\n\r\n        GameManager.instance.touchDown = true;\r\n        MsgCallUtils.notifyObserver(GameEvent.TOUCH_MAP,this.touchPos);\r\n    }\r\n    touchEnd(event)\r\n    {\r\n        GameManager.instance.touchDown = false;\r\n    }\r\n\r\n}\r\n"]}