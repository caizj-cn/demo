{"version":3,"sources":["assets\\Script\\game\\effect\\fire.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAEA,6DAAwD;AACxD,mEAA8D;AAC9D,+CAA0C;AAGpC,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAAkC,wBAAY;IAD9C;QAAA,qEA+CC;QA5CW,YAAM,GAAU,CAAC,CAAC;QAClB,YAAM,GAAU,CAAC,CAAC;QAElB,cAAQ,GAAG,EAAE,CAAC;QACd,YAAM,GAAW,KAAK,CAAC;;IAwCnC,CAAC;IAtCG,qBAAM,GAAN;IAEA,CAAC;IACD,IAAI;IACJ,oBAAK,GAAL;IAEA,CAAC;IACD,IAAI;IACJ,oBAAK,GAAL,UAAM,IAAI;QAEN,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YACd,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;SACtB;QACD,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QAC7B,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC;QACzC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACjD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACjD,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;QACrC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;QACrC,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAA,MAAM;QAC3D,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAC3C;YACI,IAAI,YAAY,GAAG,mBAAS,CAAC,eAAe,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;YAC9E,IAAI,IAAI,GAAG,EAAE,CAAC,aAAa,CAAC,sBAAsB,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;YACrE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACjC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;YACzB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAC,MAAM,CAAC;YACnC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;SAC3B;QACD,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QACxC,SAAS,CAAC,IAAI,CAAC,UAAU,EAAE;YAEvB,sBAAY,CAAC,cAAc,CAAC,mBAAS,CAAC,QAAQ,EAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC9D,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAClB,CAAC;IA3CgB,IAAI;QADxB,OAAO;OACa,IAAI,CA8CxB;IAAD,WAAC;CA9CD,AA8CC,CA9CiC,EAAE,CAAC,SAAS,GA8C7C;kBA9CoB,IAAI","file":"","sourceRoot":"/","sourcesContent":["import SoundManager from \"../../framewrok/SoundManager\";\r\nimport SoundConfig from \"../data/SoundConfig\";\r\nimport GameUtils from \"../../framewrok/utils/GameUtils\";\r\nimport MsgCallUtils from \"../../framewrok/utils/MsgCallUtils\";\r\nimport GameEvent from \"../data/GameEvent\";\r\nimport GameManager from \"../gameManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Fire extends cc.Component \r\n{\r\n    private speedX:number = 0;\r\n    private speedY:number = 0;\r\n\r\n    private aniNames = [];\r\n    private isInit:boolean = false;\r\n\r\n    onLoad() \r\n    {\r\n    }\r\n    //回收\r\n    unuse() \r\n    {\r\n    }\r\n    //重用\r\n    reuse(data) \r\n    {\r\n        if (!this.isInit) {\r\n            this.isInit = true;\r\n            this.aniNames = [];\r\n        }\r\n        this.node.angle = data.angle;\r\n        let hd = this.node.angle * Math.PI / 180;\r\n        this.speedX = Math.cos(hd) * this.node.width / 2;\r\n        this.speedY = Math.sin(hd) * this.node.width / 2;\r\n        this.node.x = data.v.x + this.speedX;\r\n        this.node.y = data.v.y + this.speedY;\r\n        let animation = this.node.getComponent(cc.Animation);//动画组件\r\n        if (this.aniNames.indexOf(data.aniName) < 0) \r\n        {\r\n            let spriteFrames = GameUtils.getSpriteFrames(data.bullet_atlas, data.aniName);\r\n            let clip = cc.AnimationClip.createWithSpriteFrames(spriteFrames, 40);\r\n            this.aniNames.push(data.aniName);\r\n            clip.name = data.aniName;\r\n            clip.wrapMode = cc.WrapMode.Normal;\r\n            animation.addClip(clip);\r\n        }\r\n        animation.playAdditive(data.aniName, 0);\r\n        animation.once(\"finished\", function () \r\n        {\r\n            MsgCallUtils.notifyObserver(GameEvent.END_FIRE,this.node);\r\n        }.bind(this));\r\n    }\r\n    \r\n \r\n}\r\n"]}